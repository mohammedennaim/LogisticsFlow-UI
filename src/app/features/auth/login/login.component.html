<div class="login-container">
  <div class="login-card">
    <!-- Logo et titre -->
    <div class="login-header">
      <div class="logo">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="logo-icon">
          <path
            d="M3.375 4.5C2.339 4.5 1.5 5.34 1.5 6.375V13.5h12V6.375c0-1.036-.84-1.875-1.875-1.875h-8.25zM13.5 15h-12v2.625c0 1.035.84 1.875 1.875 1.875h.375a3 3 0 116 0h3a.75.75 0 00.75-.75V15z" />
          <path
            d="M8.25 19.5a1.5 1.5 0 10-3 0 1.5 1.5 0 003 0zM15.75 6.75a.75.75 0 00-.75.75v11.25c0 .087.015.17.042.248a3 3 0 015.958.464c.853-.175 1.522-.935 1.464-1.883a18.659 18.659 0 00-3.732-10.104 1.837 1.837 0 00-1.47-.725H15.75z" />
          <path d="M19.5 19.5a1.5 1.5 0 10-3 0 1.5 1.5 0 003 0z" />
        </svg>
      </div>
      <h1 class="title">LogisticsFlow</h1>
      <p class="subtitle">Connectez-vous à votre compte</p>
    </div>

    <!-- Bouton de connexion SSO -->
    <div class="sso-login">
      <p class="sso-description">L'authentification est gérée par notre portail sécurisé Keycloak.</p>

      <button type="button" class="submit-btn" (click)="login()" [disabled]="isLoading()">
        @if (isLoading()) {
        <svg class="spinner" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
          <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
          <path class="opacity-75" fill="currentColor"
            d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">
          </path>
        </svg>
        <span>Redirection en cours...</span>
        } @else {
        <span>Se connecter via Keycloak</span>
        }
      </button>
    </div>

    <!-- Lien vers l'inscription Keycloak -->
    <div class="register-link sso-register">
      <span>Pas encore de compte ?</span>
      <a href="http://localhost:8080/auth/realms/logistics-realm/protocol/openid-connect/registrations?client_id=logistics-frontend&response_type=code&scope=openid%20email%20profile&redirect_uri=http://localhost:4200/"
        target="_blank">Créer un compte sur le portail</a>
    </div>
  </div>
</div>