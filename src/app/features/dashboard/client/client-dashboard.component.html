<div class="client-container">
  <!-- Top Navigation -->
  <header class="top-nav">
    <div class="nav-left">
      <div class="logo">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="logo-icon">
          <path d="M3.375 4.5C2.339 4.5 1.5 5.34 1.5 6.375V13.5h12V6.375c0-1.036-.84-1.875-1.875-1.875h-8.25zM13.5 15h-12v2.625c0 1.035.84 1.875 1.875 1.875h.375a3 3 0 116 0h3a.75.75 0 00.75-.75V15z" />
          <path d="M8.25 19.5a1.5 1.5 0 10-3 0 1.5 1.5 0 003 0zM15.75 6.75a.75.75 0 00-.75.75v11.25c0 .087.015.17.042.248a3 3 0 015.958.464c.853-.175 1.522-.935 1.464-1.883a18.659 18.659 0 00-3.732-10.104 1.837 1.837 0 00-1.47-.725H15.75z" />
          <path d="M19.5 19.5a1.5 1.5 0 10-3 0 1.5 1.5 0 003 0z" />
        </svg>
        <span>LogisticsFlow</span>
      </div>
      <nav class="main-nav">
        <a class="nav-link" [class.active]="activeTab() === 'overview'" (click)="setActiveTab('overview')">Accueil</a>
        <a class="nav-link" [class.active]="activeTab() === 'orders'" (click)="setActiveTab('orders')">Mes Commandes</a>
        <a class="nav-link" [class.active]="activeTab() === 'tracking'" (click)="setActiveTab('tracking')">Suivi Livraison</a>
        <a class="nav-link" [class.active]="activeTab() === 'products'" (click)="setActiveTab('products')">Catalogue</a>
        <a class="nav-link" [class.active]="activeTab() === 'support'" (click)="setActiveTab('support')">Support</a>
      </nav>
    </div>
    <div class="nav-right">
      <button class="refresh-btn" (click)="loadDashboardData()" [disabled]="isLoading()">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" [class.spin]="isLoading()">
          <path stroke-linecap="round" stroke-linejoin="round" d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99" />
        </svg>
      </button>
      <button class="notification-btn">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" d="M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75v-.7V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 01-5.714 0m5.714 0a3 3 0 11-5.714 0" />
        </svg>
        @if (pendingOrders() > 0) {
          <span class="notification-badge">{{ pendingOrders() }}</span>
        }
      </button>
      <div class="user-dropdown">
        <div class="user-avatar">
          {{ getUserInitials() }}
        </div>
        <span class="user-name">{{ currentUser()?.name }}</span>
        <button class="logout-btn" (click)="logout()">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75" />
          </svg>
        </button>
      </div>
    </div>
  </header>

  <!-- Loading State -->
  @if (isLoading()) {
    <div class="loading-overlay">
      <div class="loading-spinner"></div>
      <p>Chargement des donn√©es...</p>
    </div>
  }

  <!-- Main Content -->
  <main class="main-content" [class.loading]="isLoading()">
    <!-- Welcome Section -->
    <section class="welcome-section">
      <div class="welcome-content">
        <h1>Bienvenue, {{ currentUser()?.name }} üëã</h1>
        <p>Suivez vos commandes et d√©couvrez nos produits</p>
      </div>
      <div class="quick-actions">
        <button class="action-btn primary">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 00-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 00-16.536-1.84M7.5 14.25L5.106 5.272M6 20.25a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm12.75 0a.75.75 0 11-1.5 0 .75.75 0 011.5 0z" />
          </svg>
          Nouvelle commande
        </button>
        <button class="action-btn secondary">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M15 10.5a3 3 0 11-6 0 3 3 0 016 0z" />
            <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z" />
          </svg>
          Suivre une livraison
        </button>
      </div>
    </section>

    <!-- Stats Cards -->
    <section class="stats-section">
      <div class="stat-card">
        <div class="stat-icon blue">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 10.5V6a3.75 3.75 0 10-7.5 0v4.5m11.356-1.993l1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 01-1.12-1.243l1.264-12A1.125 1.125 0 015.513 7.5h12.974c.576 0 1.059.435 1.119 1.007zM8.625 10.5a.375.375 0 11-.75 0 .375.375 0 01.75 0zm7.5 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z" />
          </svg>
        </div>
        <div class="stat-info">
          <span class="stat-value">{{ formatNumber(totalOrders()) }}</span>
          <span class="stat-label">Total commandes</span>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon orange">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
        </div>
        <div class="stat-info">
          <span class="stat-value">{{ pendingOrders() }}</span>
          <span class="stat-label">En attente</span>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon purple">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 18.75a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 01-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 00-3.213-9.193 2.056 2.056 0 00-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 00-10.026 0 1.106 1.106 0 00-.987 1.106v7.635m12-6.677v6.677m0 4.5v-4.5m0 0h-12" />
          </svg>
        </div>
        <div class="stat-info">
          <span class="stat-value">{{ inTransitOrders() }}</span>
          <span class="stat-label">En transit</span>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon green">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
        </div>
        <div class="stat-info">
          <span class="stat-value">{{ deliveredOrders() }}</span>
          <span class="stat-label">Livr√©es</span>
        </div>
      </div>
    </section>

    <!-- Content Grid -->
    <section class="content-grid">
      <!-- Recent Orders -->
      <div class="orders-card">
        <div class="card-header">
          <h2>üì¶ Mes commandes r√©centes</h2>
          <button class="see-all-btn">Voir tout</button>
        </div>
        <div class="orders-list">
          @for (order of orders().slice(0, 5); track order.id) {
            <div class="order-item">
              <div class="order-icon" [class]="getOrderStatusClass(order.status)">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 10.5V6a3.75 3.75 0 10-7.5 0v4.5m11.356-1.993l1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 01-1.12-1.243l1.264-12A1.125 1.125 0 015.513 7.5h12.974c.576 0 1.059.435 1.119 1.007zM8.625 10.5a.375.375 0 11-.75 0 .375.375 0 01.75 0zm7.5 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z" />
                </svg>
              </div>
              <div class="order-details">
                <div class="order-header">
                  <span class="order-id">Commande #{{ order.id }}</span>
                  <span class="order-status" [class]="getOrderStatusClass(order.status)">
                    {{ getOrderStatusLabel(order.status) }}
                  </span>
                </div>
                <div class="order-info">
                  <span class="order-date">{{ formatDate(order.createdAt) }}</span>
                  <span class="order-price">{{ formatCurrency(order.totalAmount) }}</span>
                </div>
                <div class="order-progress">
                  <div class="progress-bar">
                    <div class="progress-fill" [style.width.%]="getOrderProgress(order.status)" [class]="getOrderStatusClass(order.status)"></div>
                  </div>
                </div>
              </div>
              <button class="order-action">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5" />
                </svg>
              </button>
            </div>
          } @empty {
            <div class="empty-state">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 10.5V6a3.75 3.75 0 10-7.5 0v4.5m11.356-1.993l1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 01-1.12-1.243l1.264-12A1.125 1.125 0 015.513 7.5h12.974c.576 0 1.059.435 1.119 1.007zM8.625 10.5a.375.375 0 11-.75 0 .375.375 0 01.75 0zm7.5 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z" />
              </svg>
              <p>Aucune commande pour le moment</p>
              <button class="action-btn primary">Faire une commande</button>
            </div>
          }
        </div>
      </div>

      <!-- Active Shipments -->
      <div class="shipments-card">
        <div class="card-header">
          <h2>üöö Livraisons en cours</h2>
          <button class="see-all-btn">Voir tout</button>
        </div>
        <div class="shipments-list">
          @for (shipment of shipments().slice(0, 4); track shipment.id) {
            <div class="shipment-item">
              <div class="shipment-header">
                <div class="shipment-icon" [class]="getShipmentStatusClass(shipment.status)">
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 18.75a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 01-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 00-3.213-9.193 2.056 2.056 0 00-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 00-10.026 0 1.106 1.106 0 00-.987 1.106v7.635m12-6.677v6.677m0 4.5v-4.5m0 0h-12" />
                  </svg>
                </div>
                <div class="shipment-info">
                  <span class="tracking-number">#{{ shipment.trackingNumber || shipment.id }}</span>
                  <span class="shipment-status" [class]="getShipmentStatusClass(shipment.status)">
                    {{ getShipmentStatusLabel(shipment.status) }}
                  </span>
                </div>
              </div>
              <div class="shipment-timeline">
                <div class="timeline-step completed">
                  <div class="step-dot"></div>
                  <span>Pr√©paration</span>
                </div>
                <div class="timeline-step" [class.completed]="shipment.status !== 'PENDING'" [class.active]="shipment.status === 'IN_TRANSIT'">
                  <div class="step-dot"></div>
                  <span>En transit</span>
                </div>
                <div class="timeline-step" [class.completed]="shipment.status === 'DELIVERED'">
                  <div class="step-dot"></div>
                  <span>Livr√©</span>
                </div>
              </div>
              @if (shipment.estimatedDelivery) {
                <div class="delivery-estimate">
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5" />
                  </svg>
                  Livraison pr√©vue: {{ formatDate(shipment.estimatedDelivery) }}
                </div>
              }
            </div>
          } @empty {
            <div class="empty-state">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 18.75a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 01-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 00-3.213-9.193 2.056 2.056 0 00-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 00-10.026 0 1.106 1.106 0 00-.987 1.106v7.635m12-6.677v6.677m0 4.5v-4.5m0 0h-12" />
              </svg>
              <p>Aucune livraison en cours</p>
            </div>
          }
        </div>
      </div>
    </section>

    <!-- Products Catalog -->
    <section class="products-section">
      <div class="section-header">
        <h2>üõçÔ∏è Catalogue produits</h2>
        <button class="see-all-btn">Voir le catalogue complet</button>
      </div>
      <div class="products-grid">
        @for (product of products().slice(0, 6); track product.id) {
          <div class="product-card">
            <div class="product-image">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" d="M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z" />
              </svg>
            </div>
            <div class="product-info">
              <h3 class="product-name">{{ product.name }}</h3>
              <p class="product-sku">SKU: {{ product.sku }}</p>
              <div class="product-footer">
                <span class="product-price">{{ formatCurrency(product.unitPrice) }}</span>
                <button class="add-to-cart-btn">
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
                  </svg>
                </button>
              </div>
            </div>
          </div>
        } @empty {
          <div class="empty-state full-width">
            <p>Aucun produit disponible</p>
          </div>
        }
      </div>
    </section>
  </main>
</div>
